<!DOCTYPE html>
<html lang='en'>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Olympeeks Athletes Topic</title>
<link href="../css/bootstrap.min.css" rel="stylesheet" media="screen">
<style type="text/css">


<!--
/* page styling */
/* some custom fonts via google font api */
@import url(http://fonts.googleapis.com/css?family=Lobster);
body{margin:0; padding:0; background:#303030;}s
header h1{font-family:"Lobster", Arial, Helvetica,sans-se; color:#333;}
header h1 .big{font-size: 34px; color:#d56916;}
-->
</style>
<!-- thumbnail scroller stylesheet -->
<link href="styles.css" rel="stylesheet" />

<!-- jquery -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<!-- jquery ui custom build (for animation easing) -->
<script src="../jquery-ui-1.8.13.custom.min.js"></script>

</head>

<body>
	<!-- Wrap the .navbar in .container to center it on the page and provide easy way to target it with .navbar-wrapper. -->
    <div class="container navbar-wrapper">

      <div class="navbar navbar-inverse">
        <div class="navbar-inner">
          <!-- Responsive Navbar Part 1: Button for triggering responsive navbar (not covered in tutorial). Include responsive CSS to utilize. -->
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Olympeeks</a>
          <!-- Responsive Navbar Part 2: Place all navbar contents you want collapsed withing .navbar-collapse.collapse. -->
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="#">Home</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Topics <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#">Country</a></li>
                  <li><a href="#">Athelete</a></li>
                  <li><a href="#">Sport</a></li>
                  <li><a href="#">Female</a></li>
                </ul>
              </li>
              <li><a href="#Request">Add Request</a></li>
              <li><a href="#About">About</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-user icon-white"></i>User<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#signIn-box" id='SignInButton' name='SignInButton'><i class="icon-arrow-right"></i>Login</a></li>
                  <li><a href="#"><i class="icon-arrow-left"></i>Logout</a></li>
                </ul>
              </li>
              <!-- Read about Bootstrap dropdowns at http://twitter.github.com/bootstrap/javascript.html#dropdowns -->
            </ul>
          </div><!--/.nav-collapse -->
        </div><!-- /.navbar-inner -->
      </div><!-- /.navbar -->

    </div><!-- /.container -->


<!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide">
      <div class="carousel-inner">
        <div class="item active">
          <img src="tiCao.png" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>Follow your favorite athlete</h1>
              <p class="lead">In a history of over a one hundred years, Olympic Games have given rise to so many stars we will never forget. Muhammad Ali， Michael Phelps，Usain Bolt, Yelena Isinbayeva, you name it. Choose your favorite athlete and you can see your hero's performance in the Olympic game.</p>
              <a class="btn btn-large btn-primary" href="#signUp-box" id="SignUpButton" name="SignUpButton">Sign up today</a>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="liuxiang.png" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>Liu Xiang, the cultural icon of China.</h1>
              <p class="lead"> Winning the 2004 Olympic game 110m hurdle made Liu Xiang the first Chinese athlete to achieve a Olympic Champion in men's track and field. Although he wasn't able to win the crown again in 2008 and 2012, he's still a very popular superstar in China </p>
              <a class="btn btn-large btn-primary" href="#">Learn more</a>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="swimming.png" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>One more for good measure.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Browse gallery</a>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div><!-- /.carousel -->




<div class="row-fluid">
<div class="span12">
<!--
<header>
<h1><span class="big"></span></h1>
</header>
-->
</div>
</div>



<div class="container-fluid">
<div class="row-fluid">
<div class="span3">
<br>
<br>
<br>
<br>
<!-- selector begin -->
<div class="styled-select">
     <div class="selectpair">
     <select id = "country" name = "country">
          <option>Please select the country</option>
     </select> <br>
 	</div>
 	<div class="selectpair">
     <select id = "SportsCategory" name = "SportsCategory">
      		<option> Please select the sports category </option>
     </select>  <br>
 	</div>
 	<div class="selectpair">
     <select id = "SportsEvent" name = "SportsEvent">	
               <option> Please select the particular sports event </option>
     </select>  <br>
 	</div>
 	<div class="selectpair">
     <select id = "Year" name = "Year">	
               <option> Please select the year </option>
     </select>  <br>
 	</div>
 	<div class="selectpair">
     <select id = "Athletes" name = "Atheletes">	
               <option> Please select the athlete </option>
     </select>  <br>
 	</div>
</div>
<p>
<br>
<br>
<br>
<button class="btn btn-primary" type="button" id = 'trendButton'>TRENDS!</button>
</p>
</div>

<div class="span9">

<div class = "GraphContainer">
	<canvas id="cvs" width="800" height="400">[No canvas support]</canvas>
</div>

</div>
</div>
</div>
<!-- thumbnail scroller markup begin -->
<div id="slidercontainer">
<div id="tS2" class="jThumbnailScroller" style="margin-top:100px;">
	<div class="jTscrollerContainer">
		<div class="jTscroller">
			<a class="recommend"><img src="thumbs/img1.jpg" /></a>
			<a class="recommend"><img src="thumbs/img2.jpg" /></a>
			<a><img src="thumbs/img3.jpg" /></a>
			<a><img src="thumbs/img4.jpg" /></a>
			<a><img src="thumbs/img5.jpg" /></a>
			<a><img src="thumbs/img6.jpg" /></a>
			<a><img src="thumbs/img7.jpg" /></a>
			<a><img src="thumbs/img8.jpg" /></a>
			<a><img src="thumbs/img9.jpg" /></a>
			<a><img src="thumbs/img10.jpg" /></a>
			<a><img src="thumbs/img11.jpg" /></a>
			<a><img src="thumbs/img12.jpg" /></a>
			<a><img src="thumbs/img13.jpg" /></a>
			<a><img src="thumbs/img14.jpg" /></a>
			<a><img src="thumbs/img15.jpg" /></a>
			<a><img src="thumbs/img16.jpg" /></a>
			<a><img src="thumbs/img17.jpg" /></a>
			<a><img src="thumbs/img18.jpg" /></a>
			<a><img src="thumbs/img19.jpg" /></a>
			<a><img src="thumbs/img20.jpg" /></a>
		</div>
	</div>
	<a href="#" class="jTscrollerPrevButton"></a>
	<a href="#" class="jTscrollerNextButton"></a>
</div>
</div>
<!-- thumbnail scroller markup end -->

	<div id="signUp-box" class="login-popup">		
		<form method="post" class="signin">
			<fieldset class="textbox" id='SignUpTable' name='SignUpTable'>
				<label class="username"> <span>Please enter your username</span> <input
					id="usernameSignUp" name="usernameSignUp" value="" type="text"
					placeholder="Username">
				</label> 
				<label class="password"> <span>Please enter your password</span> <input
					id="passwordSignUpFirst" name="passwordSignUpFirst" value="" type="password"
					placeholder="Password">
				</label>
				<label class="password"> <span>Please confirm your password</span> <input
					id="passwordSignUpSecond" name="passwordSignUpSecond" value="" type="password"
					placeholder="Password">
				</label>
				<button class="submit button" type="button" id="SignUp" name="SignUp">Sign Up</button>
				
			</fieldset>
			<p id='duplicate' name='duplicate' style='display:none'>The username you entered has been chosen</p>
			<p id='notmatched' name='notmatched' style='display:none'>The passwords you enter don't match</p>
			<p id="messageSuccessSignUp" name ='messageSuccessSignUp' style='display:none'>Welcome Onboard</p>
		</form>
	</div>

<div id="signIn-box" class="login-popup">		
		<form method="post" class="signin">
			<fieldset class="textbox" id='SignInTable' name='SignInTable'>
				<label class="username"> <span>Please enter your username</span> 

				<input
					id="Username" name="Username" value="" type="text" onblur="validateUser();"
					placeholder="Username">
				</label> 
				<label id="errorUsername"></label>
				
				<label class="password"> <span>Please enter your password</span> <input
					id="Password" name="Password" value="" type="password" onblur="validatePassword();"
					placeholder="Password">
				</label>
				<label id="errorPassword"></label>
				<button class="submit button" type="button" id="SignIn" name="SignIn">Sign In</button>
				
			</fieldset>
			<p id="messageSuccess" name ='messageSuccess' style='display:none'>Welcome back</p>
			<p id="messageFail" name = 'messageFail' style='display:none'>Wrong Password</p>
		</form>
	</div>

<script>
/* jQuery.noConflict() for using the plugin along with other libraries. 
   You can remove it if you won't use other libraries (e.g. prototype, scriptaculous etc.) or 
   if you include jQuery before other libraries in yourdocument's head tag. 
   [more info: http://docs.jquery.com/Using_jQuery_with_Other_Libraries] */
jQuery.noConflict(); 
/* calling thumbnailScroller function with options as parameters */

(function($){

 var selectedCountry;
 var selSportsCategory;
 var selSportsEvent;
 var selAthlete;
 var year;
 var athletes;
 var graphs;

//select the country
 window.onload=function(){

 	$("#tS2").thumbnailScroller({ 
		scrollerType:"hoverPrecise", 
		scrollerOrientation:"horizontal", 
		scrollSpeed:2, 
		scrollEasing:"easeOutCirc", 
		scrollEasingAmount:600, 
		acceleration:4, 
		scrollSpeed:800, 
		noScrollCenterSpace:10, 
		autoScrolling:0, 
		autoScrollingSpeed:2000, 
		autoScrollingEasing:"easeInOutQuad", 
		autoScrollingDelay:500 
	});
	 $.getJSON('../AthleteSvt',{country: false},function(results){
		 var country = $("#country");
		// $('>option', country).remove();
		 if(results){
			 $.each(results, function(i,result){
					country.append($('<option/>').val(result).text(result));
			}); 
		 }else{
			 country.append($('<option/>').text("Please select the country"));
		 }
	 })
 }
 
 //select the start year, after selecting the country
 $(function(){
 	//if the country tag change then called funcion??
	 $("#country").change(function(){
		selectedCountry = $(this).val();
		$.getJSON('../AthleteSvt',{country: selectedCountry, SportsCategory: false}, function(results){
			var selSportsCategory = $("#SportsCategory");
			 $('>option', selSportsCategory).remove();
			 if(results){
				 selSportsCategory.append($('<option/>').text("Please select the SportsCategory"));
				 $.each(results, function(i,result){
						selSportsCategory.append($('<option/>').val(result).text(result));
				}); 
			 }else{
				 selSportsCategory.append($('<option/>').text("Please select the SportsCategory"));
			 }
			
		});
	 });
 });
 
 //select the end year after selecting the country and start year
 $(function(){
	 $("#SportsCategory").change(function(){
		selSportsCategory = $(this).val();
		//what is $(this) here
		$.getJSON('../AthleteSvt',
				{country: selectedCountry, 
				SportsCategory: selSportsCategory,
				SportsEvents: false}, function(results){
			var SportsEvent = $("#SportsEvent");
			$('>option', SportsEvent).remove();
			if(results){
				SportsEvent.append($('<option/>').text("Please select the particular sports event"));
				$.each(results, function(i,result){
					SportsEvent.append($('<option/>').val(result).text(result));
				});
			} else{
				SportsEvent.append($('<option/>').text("Please select the particular sports event"));
			}	
		});
	 });
 });
 
 $(function(){
	 $("#SportsEvent").change(function(){
		selSportsEvent = $(this).val();
		$.getJSON('../AthleteSvt',
				{country: selectedCountry, 
				SportsCategory: selSportsCategory,
				SportsEvents: selSportsEvent,
				year: false}, function(results){
			var year = $("#Year");
			$('>option', year).remove();
			if(results){
				year.append($('<option/>').text("Please select the particular year"));
				$.each(results, function(i,result){
					year.append($('<option/>').val(result).text(result));
				});
			} else{
				year.append($('<option/>').text("Please select the particular year"));
			}	
		});
	 });
 });

 $(function(){
	 $("#Year").change(function(){
		selYear = $(this).val();
		$.getJSON('../AthleteSvt',
				{country: selectedCountry, 
				SportsCategory: selSportsCategory,
				SportsEvents: selSportsEvent,
				year: selYear		
				//pass the chosen sportsCategory to the servelet 
					}, function(results){
			var athletes = $("#Athletes");
			$('>option', athletes).remove();
			if(results){
				athletes.append($('<option/>').text("Please select the athlete"));
				$.each(results, function(i,result){
					athletes.append($('<option/>').val(result).text(result));
				});
			} else{
				athletes.append($('<option/>').text("Please select the athlete"));
			}	
		});
	 });
 });

 //draw the trend picture
 $(function(){
	 $("#Athletes").change(function(){
		selAthlete = $(this).val();
	 });
 });
 
 $(function(){	
	 	$("#trendButton").click(function(){
			$.getJSON('../GraphAthleteSvt',
					{athlete: selAthlete,
					SportsEvents: selSportsEvent},function(results){
				
					//draw the graph
					drawGraph(results);
				});
		});
	});
 })(jQuery);
 
 function drawGraph(results){
	 	//refresh the div, to refresh the canvas
		$('.GraphContainer').empty();
		$('.GraphContainer').append('<canvas id="cvs" width="900" height="400">[No canvas support]</canvas>');
	  	if(results){
		//get the graph
		var graph = getGraph('cvs', results);
		//draw the graph
		graph.Draw();
		}else{
			$('#toggleText').show();
		}
	  	
}

function getGraph(id, results){
	 	var graphObject = results;
		if(!line){
				var line = new RGraph.Line(id, graphObject.golds);
			    line.Set('chart.labels', graphObject.years);
			    line.Set('chart.key', ['Ranks']);
			    line.Set('chart.key.interactive', true);
			    line.Set('chart.xaxispos', 'top');
			    line.Set('chart.linewidth', 2);
			    line.Set('chart.tickmarks', 'endcircle');
			    line.Set('chart.hmargin', 5);	     	
		}
		return line;
}
 
</script>

<script>
	
	var username;
	var usernameSignUp;
	var password;
	var passwordSignUpFirst;
	var passwordSignUpSecond;

function validateUser() { 
		var text = document.getElementById("Username").value;
		if (text == ""){
			document.getElementById("errorUsername").innerHTML="Provide Username";
			document.getElementById("errorUsername").style.color = "red";
		}else{
			document.getElementById("errorUsername").innerHTML="OK";
			document.getElementById("errorUsername").style.color = "green";
		}
	 }
	 
	 function validatePassword() { 
		var text = document.getElementById("Password").value;
		if (text == ""){
			document.getElementById("errorPassword").innerHTML="Provide Password";
			document.getElementById("errorPassword").style.color = "red";
		}else{
			document.getElementById("errorPassword").innerHTML="OK";
			document.getElementById("errorPassword").style.color = "green";
		}
	 } 
(function($){
	
	
	 $('#SignIn').click(function(){
		$.getJSON('../ValidateLogin',{Username: username, Password: password}, function(results){
				if(results=='Success'){
					$("#SignInTable").hide();
					$("#messageSuccess").html("Welcome back "+username);
					$("#messageSuccess").show();
					$("#messageFail").hide();
					
				}else{
					$("#SignInTable").hide();
					$("#messageFail").show();
					$("#messageSuccess").hide();
				}
				//draw the graph
					
				});
		});



	
	 
	 $(function(){
		$("#Username").change(function(){
		username = $(this).val();
	 });
 	});

	 
	 $(function (){
	$("#Password").change(function(){
		password = generate($(this).val(),'olympics');
	 });
 	});


	 
	$('#SignUpButton').click(function() {
		
      //Getting the variable's value from a link 
		var SignUpBox = $(this).attr('href');
		$("#SignUpTable").show();
		$("#duplicate").hide();
		$("#notmatched").hide();
		$("#messageSuccessSignUp").hide();
		//Fade in the Popup
		$(SignUpBox).fadeIn(300);
		
		//Set the center alignment padding + border see css style
		var popMargTop = ($(SignUpBox).height() + 24) / 2; 
		var popMargLeft = ($(SignUpBox).width() + 24) / 2; 
		
		$(SignUpBox).css({ 
			'margin-top' : -popMargTop,
			'margin-left' : -popMargLeft
		});
		
		// Add the mask to body
		$('body').append('<div id="mask"></div>');
		$('#mask').fadeIn(300);
		
		return false;
	});


	 	 
	$('#SignInButton').click(function() {
		
      //Getting the variable's value from a link 
		var SignInBox = $(this).attr('href');
		$("#SignInTable").show();
		$("#messageSuccess").hide();
		$("#messageFail").hide();
		//Fade in the Popup
		$(SignInBox).fadeIn(300);
		
		//Set the center alignment padding + border see css style
		var popMargTop = ($(SignInBox).height() + 24) / 2; 
		var popMargLeft = ($(SignInBox).width() + 24) / 2; 
		
		$(SignInBox).css({ 
			'margin-top' : -popMargTop,
			'margin-left' : -popMargLeft
		});
		
		// Add the mask to body
		$('body').append('<div id="mask"></div>');
		$('#mask').fadeIn(300);
		
		return false;
	});

	
	// When clicking on the button close or the mask layer the popup closed
	
	$('a.close, #mask').live('click', function() { 
	  $('#mask , .login-popup').fadeOut(300 , function() {
		$('#mask').remove();  
	}); 
	return false;
	});


	 
	
		 $(function(){
			$("#SignUp").click(function(){
			$.getJSON('../SignUp',{Username: usernameSignUp, PasswordFirst: passwordSignUpFirst,
				PasswordSecond: passwordSignUpSecond}, function(results){
				if(results=='duplicate'){
					$("#SignUpTable").hide();
					$("#duplicate").show();
					
				}else if(results=='NotMatched'){
					$("#SignUpTable").hide();
					$("#notmatched").show();
				}else{
					$('#mask , .login-popup').fadeOut(300 , function() {
						$('#mask').remove();  
					});
					$("#messageSuccessSignUp").html("Welcome Onboard "+usernameSignUp);
					$("#messageSuccessSignUp").show();
				}
				//draw the graph
					
				});
		 });
	 	});

	 

	
		$(function() {
			$("#usernameSignUp").change(function() {
				usernameSignUp = $(this).val();
			});
		});
	

	
		$(function() {
			$("#passwordSignUpFirst").change(function() {
				passwordSignUpFirst = generate($(this).val(),'olympics');
			});
		});


	
		$(function() {
			$("#passwordSignUpSecond").change(function() {
				passwordSignUpSecond = generate($(this).val(),'olympics');
			});
		});

 })(jQuery);

</script>

<!-- thumbnailScroller script -->
<link rel="stylesheet" type="text/css" href="./SignIn.css">
<script src="../jquery.thumbnailScroller.js"></script>
<script src="../sha1.js" ></script> 
<script src="../libraries/RGraph.common.core.js" ></script>
<script src="../libraries/RGraph.common.dynamic.js" ></script>
<script src="../libraries/RGraph.common.tooltips.js" ></script>
<script src="../libraries/RGraph.common.effects.js" ></script>
<script src="../libraries/RGraph.line.js" ></script>
<script src="../libraries/jquery.min.js" ></script> 
<script src="../libraries/RGraph.common.key.js" ></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
</body>
</html>
